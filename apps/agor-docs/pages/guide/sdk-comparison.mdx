---
title: SDK Feature Comparison
description: Compare AI coding agent capabilities in agor. Feature matrix for Claude Code, Codex, and Gemini integrations including streaming, tool approval, and SDK differences.
---

# SDK Feature Comparison

Agor integrates with multiple AI coding agents. Each SDK has different capabilities based on their native features and API design.

## Feature Matrix

| Feature | Claude Code | Codex | Gemini | Notes |
|---------|-------------|-------|--------|-------|
| **Streaming responses** | ‚úÖ Yes | ‚úÖ Yes | ‚úÖ Yes | All support token-level streaming for typewriter effect |
| **Stop mid-execution** | ‚úÖ Yes | ‚ö†Ô∏è Limited | ‚ö†Ô∏è Limited | Claude has `interrupt()`, others may lose partial work |
| **Session import/export** | ‚úÖ Yes | ‚ùå No | ‚ùå No | Only Claude Code stores sessions as JSONL transcripts |
| **Session forkable** | ‚úÖ Yes (via replay) | ‚úÖ Yes (via replay) | ‚úÖ Yes (via replay) | Agor emulates forking by replaying messages to new session |
| **MCP integration** | ‚úÖ Native | ‚ùå No | ‚ùå No | Claude Code has first-class MCP server support |
| **Permission requests** | ‚úÖ Rich | ‚ö†Ô∏è Basic | ‚ö†Ô∏è Basic | Claude has granular tool permissions, others use simpler modes |
| **Project instructions** | ‚úÖ CLAUDE.md | ‚ö†Ô∏è Manual | ‚ö†Ô∏è Manual | Claude auto-loads CLAUDE.md, others need manual injection |
| **Git awareness** | ‚úÖ Built-in | ‚ùå Manual | ‚ùå Manual | Claude tracks git state natively, Agor manages it for others |
| **Tool execution** | ‚úÖ Rich widgets | ‚ö†Ô∏è Basic | ‚ö†Ô∏è Basic | Claude exposes detailed tool metadata for rich visualization |
| **Session continuity** | ‚úÖ SDK-managed | ‚úÖ History-based | ‚úÖ History-based | Claude uses `session_id`, others replay message history |
| **Conversation history** | ‚úÖ Automatic | üü° Manual | üü° Manual | Claude SDK manages history, others require explicit passing |
| **Token usage tracking** | ‚úÖ Full | ‚ùå No | ‚ùå No | Claude provides input/output/cache tokens, others not yet implemented |

**Legend:**
- ‚úÖ **Full support** - Feature works natively via SDK
- ‚ö†Ô∏è **Limited** - Partial support or workarounds needed
- üü° **Emulated** - Agor implements the feature
- ‚ùå **Not supported** - Not available

---

## Detailed Feature Breakdown

### 1. Streaming Responses

**All SDKs support streaming, but with different patterns:**

**Claude Code:**
- Token-level streaming via async generators
- True real-time with minimal latency
- Supports stopping mid-stream

**Codex:**
- Streaming via OpenAI's SSE (Server-Sent Events)
- Chunks may be larger than tokens
- Good real-time performance

**Gemini:**
- Streaming via `sendMessageStream()`
- Token-level chunks
- Reliable streaming performance

**Agor Implementation:** StreamingCallbacks interface provides unified streaming for all agents.

---

### 2. Stop Mid-Execution

**Claude Code:** ‚úÖ **Full support**
- Native `interrupt()` method in Agent SDK
- Gracefully stops execution
- Returns partial results
- Safe cleanup of resources

**Codex:** ‚ö†Ô∏è **Limited**
- Can abort HTTP request
- May lose partial work
- Less graceful than Claude

**Gemini:** ‚ö†Ô∏è **Limited**
- Can abort stream
- May lose partial tool execution results
- Similar to Codex limitations

---

### 3. Session Import/Export

**Claude Code:** ‚úÖ **Full support**
- Sessions stored as JSONL transcript files in `~/.claude/projects/`
- Rich metadata (git state, tool uses, timestamps)
- Agor can parse and replay transcripts
- Enables session portability

**Codex:** ‚ùå **Not supported**
- No native session persistence format
- Agor stores sessions in own database
- Cannot import external Codex sessions

**Gemini:** ‚ùå **Not supported**
- Has checkpoint system but format undocumented
- Agor stores sessions in own database
- Cannot import external Gemini sessions

---

### 4. Session Forking

**All agents support forking via Agor's replay mechanism:**

1. User requests fork at specific message
2. Agor creates new session
3. Replays messages up to fork point
4. New prompts diverge from original
5. Full genealogy tracking in database

**Note:** This is an Agor feature, not SDK-native. Works identically across all agents.

---

### 5. MCP Integration

**Claude Code:** ‚úÖ **Native support**
- MCP servers configured in Agent SDK options
- Tools automatically exposed to Claude
- Supports MCP prompts, resources, and tools
- Agor UI for managing MCP server configs per session

**Codex:** ‚ùå **Not supported**
- No MCP protocol support
- Would require custom tool definitions

**Gemini:** ‚ùå **Not supported**
- No MCP protocol support
- Uses Google's function calling instead

**See [Architecture Guide: Agor as an MCP Server](/guide/architecture#agor-as-an-mcp-server) for details on using MCP with Claude Code.**

---

### 6. Permission Requests

**Claude Code:** ‚úÖ **Rich permission system**
- Granular tool-level permissions (`Read`, `Write`, `Edit`, `Bash`, etc.)
- Permission modes: `'ask'`, `'auto'`, `'allow-all'`
- Tool-specific context (file paths, command previews)
- Diff previews for file edits
- Agor shows rich permission modals with previews

**Codex:** ‚ö†Ô∏è **Basic permission modes**
- Simpler permission system
- Modes: `'ask'`, `'auto'`, `'allow-all'`
- Less granular than Claude

**Gemini:** ‚ö†Ô∏è **Basic permission modes**
- Similar to Codex
- Function calling requires explicit approval
- Less detailed context than Claude

**Agor Implementation:** Permission modals adapt based on available SDK metadata. Claude shows richest UX.

---

### 7. Project Instructions

**Claude Code:** ‚úÖ **CLAUDE.md auto-loading**
- Agent SDK automatically loads `CLAUDE.md` from working directory
- Supports both project-level (`.claude/`) and personal (`~/.claude/`) instructions
- No manual injection needed
- Agor sessions inherit project instructions automatically

**Codex:** ‚ö†Ô∏è **Manual injection**
- No standard instruction file format
- Agor can inject instructions via system prompt
- Requires explicit configuration

**Gemini:** ‚ö†Ô∏è **Manual injection**
- No standard instruction file format
- Agor can inject instructions via system prompt
- Requires explicit configuration

**Recommendation:** Use Claude Code for projects with rich context requirements. For Codex/Gemini, manage instructions in Agor session config.

---

### 8. Git Awareness

**Claude Code:** ‚úÖ **Built-in git tracking**
- SDK tracks git state natively
- Knows current branch, commit SHA, dirty state
- Can reference git history in responses

**Codex:** ‚ùå **No native git awareness**
- Agor manages git state for worktrees
- Git context injected via prompts if needed

**Gemini:** ‚ùå **No native git awareness**
- Agor manages git state for worktrees
- Git context injected via prompts if needed

**Agor Implementation:** All sessions track git state in database. Claude gets it "for free", others rely on Agor's worktree management.

---

### 9. Tool Execution & Visualization

**Claude Code:** ‚úÖ **Rich tool metadata**
- Detailed tool use objects with `id`, `name`, `input`
- Tool result blocks with rich content types
- Supports rendering custom tool widgets (Todo lists, diffs, etc.)
- Agor can build sophisticated tool visualizations

**Codex:** ‚ö†Ô∏è **Basic function calling**
- OpenAI function calling format
- Less structured than Claude's tools
- Agor normalizes to common format

**Gemini:** ‚ö†Ô∏è **Basic function calling**
- Google function calling format
- Similar to Codex in structure
- Agor normalizes to common format

**Agor's Tool Widgets:**
- **Todo lists** - Rendered from Claude's TodoWrite tool
- **File diffs** - Syntax-highlighted edits (Claude Write/Edit tools)
- **Bash output** - Terminal-style output rendering
- **Permission requests** - Interactive approval modals

Works best with Claude Code due to richer tool metadata.

---

### 10. Session Continuity

**Claude Code:** ‚úÖ **SDK-managed conversation**
- Agent SDK assigns `session_id` for multi-turn conversations
- Agor captures and stores `sdk_session_id`
- Seamless continuity across multiple prompts
- No message replay needed

**Codex:** üü° **History-based continuity**
- No native session concept
- Agor passes message history array to each API call
- Seamless from user perspective, more work behind the scenes

**Gemini:** üü° **History-based continuity**
- Uses `setHistory()` to restore conversation state
- Similar to Codex pattern
- Works reliably but requires explicit history management

**Performance Consideration:** Claude's session_id approach scales better for very long conversations (no need to resend full history). Codex/Gemini history-based approach works fine for typical sessions.

---

### 11. Token Usage Tracking

**Claude Code:** ‚úÖ **Comprehensive token tracking**
- Full extraction from SDK `token_usage` events
- Tracks: `input_tokens`, `output_tokens`, `total_tokens`
- Prompt caching metrics: `cache_read_tokens`, `cache_creation_tokens`
- Context window tracking via `model_usage` metadata
- Real-time usage display in Agor UI
- Historical usage analytics per session/task

**Codex:** ‚ùå **Not implemented**
- OpenAI API provides usage data but not yet extracted
- Future: Will track `prompt_tokens`, `completion_tokens`, `total_tokens`

**Gemini:** ‚ùå **Not implemented**
- Gemini API provides usage data but not yet extracted
- Future: Will track input/output token counts

**Why it matters:**
- **Cost tracking** - Monitor API spending per session/project
- **Performance optimization** - Identify prompt caching opportunities (Claude)
- **Context management** - Track how close you are to context limits
- **Analytics** - Compare efficiency across different tasks

**Agor Implementation:** Token data stored in `messages` table, aggregated for session-level analytics. Claude users get immediate benefit; Codex/Gemini support coming soon.

---

## Choosing an Agent

### Use Claude Code when:
- You need rich project instructions (CLAUDE.md)
- MCP server integration is required
- You want detailed tool execution visualization
- Session import/export is important
- You need the best permission request UX
- Token usage tracking and cost monitoring is important

### Use Codex when:
- You prefer OpenAI's models
- You don't need MCP integration
- Basic permissions are sufficient
- You're okay with Agor managing context

### Use Gemini when:
- You prefer Google's models
- Cost is a primary concern (Gemini pricing)
- Streaming is important (Gemini has good streaming)
- You don't need MCP integration

---

## Future Improvements

As agent SDKs evolve, Agor will gain new capabilities.

**[See full roadmap on GitHub](https://github.com/preset-io/agor/issues?q=is%3Aissue%20state%3Aopen%20label%3Aroadmap)**

Agent integration priorities:
- **Token tracking for Codex & Gemini** - Extract usage data from OpenAI/Google APIs
- **Codex MCP support** - If OpenAI adds MCP protocol
- **Gemini project files** - If Google adds instruction file support
- **Better stop controls** - More graceful cancellation for all agents
- **Richer tool metadata** - If Codex/Gemini expose more tool details

---

## Related Documentation

- [Agent Integration Architecture](/guide/architecture#agent-integration)
- [Agor as an MCP Server](/guide/architecture#agor-as-an-mcp-server)
- [MCP Tools Reference](/guide/architecture#mcp-tools-reference)
